#! /usr/bin/perl

use warnings;
use strict;

use lib $ENV{HOME} . '/perl5/lib/perl5'; #  look for a local::lib in ~
use lib             '../perl5/lib/perl5'; #  ... then in this repo

use FindBin;
use lib "$FindBin::Bin/../lib";

# the repo
my $init_repo           = 0; # should we create a repo if it doesn't exist 
                             # mostly only useful for testing new vesions of the script with repos in /tmp

my $repo_path           =
    $init_repo
        ? ( sprintf "/tmp/commit-spam-repo-%s",$$ )
        : ( sort glob "/tmp/commit-spam-repo-*"   )[-1]   # the last one, whatever.
        ;

# if ( ! -d "$repo_path/.git" ) { 
#     print "$_ -> ",`$_ `, $?, "\n" for 
#         "mkdir -p $repo_path",
#         "ls $repo_path",
#         "cd $repo_path && git init" 
#     ;
# }

use Git::Spam::Command;
my $program = Git::Spam::Command->new();
# $program->options( $value);
exit run $program;



print "Using $repo_path";

